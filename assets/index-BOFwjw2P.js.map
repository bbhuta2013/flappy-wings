{"version":3,"file":"index-BOFwjw2P.js","sources":["../../src/main.js"],"sourcesContent":["import kaplay from \"kaplay\";\r\n\r\nconst FLOOR_HEIGHT = 48;\r\nconst JUMP_FORCE = 900;\r\nconst START_SPEED = 480;\r\nlet SPEED = 0;\r\n\r\n// initialize context\r\nkaplay(\r\n    {\r\n        width: 1920,\r\n        height: 1080,\r\n        letterbox: true\r\n    }\r\n);\r\n\r\nlet increaseSpeed;\r\n\r\n// load assets\r\nloadSprite(\"flappy\", \"sprites/67-bird.png\");\r\nloadSprite(\"bg\", \"sprites/67-land-BG.png\")\r\nscene(\"game\", () => {\r\n    SPEED = START_SPEED;\r\n    increaseSpeed = setInterval(() => {\r\n        SPEED += 10;\r\n    }, 1000)\r\n\r\n    // define gravity\r\n    setGravity(2700);\r\n\r\n    add([\r\n        sprite(\"bg\"),\r\n        scale(4)\r\n    ])\r\n\r\n    // add a game object to screen\r\n    const player = add([\r\n        // list of components\r\n        sprite(\"flappy\"),\r\n        scale(3),\r\n        pos(80, 40),\r\n        anchor(\"center\"),\r\n        area({ scale: 0.5 }),\r\n        body(),\r\n\r\n    ]);\r\n\r\n    // floor\r\n    add([\r\n        rect(width(), FLOOR_HEIGHT),\r\n        outline(4),\r\n        pos(0, height()),\r\n        anchor(\"botleft\"),\r\n        area(),\r\n        body({ isStatic: true }),\r\n        color(127, 200, 255),\r\n    ]);\r\n\r\n\r\n\r\n    function jump() {\r\n        if (player.isGrounded()) {\r\n            player.jump(JUMP_FORCE);\r\n        }\r\n    }\r\n\r\n    // jump when user press space\r\n    onKeyPress(\"space\", jump);\r\n    onClick(jump);\r\n\r\n    function spawnTree() {\r\n        // add tree obj\r\n        add([\r\n            rect(48, rand(32, 96)),\r\n            area(),\r\n            outline(4),\r\n            pos(width(), height() - FLOOR_HEIGHT),\r\n            anchor(\"botleft\"),\r\n            color(255, 180, 255),\r\n            move(LEFT, SPEED),\r\n            \"tree\",\r\n        ]);\r\n\r\n        // wait a random amount of time to spawn next tree\r\n        wait(rand(0.5, 1.5), spawnTree);\r\n    }\r\n\r\n    // start spawning trees\r\n    spawnTree();\r\n\r\n    // lose if player collides with any game obj with tag \"tree\"\r\n    player.onCollide(\"tree\", () => {\r\n        // go to \"lose\" scene and pass the score\r\n        go(\"lose\", score);\r\n        burp();\r\n        addKaboom(player.pos);\r\n    });\r\n\r\n    // keep track of score\r\n    let score = 0;\r\n\r\n    const scoreLabel = add([text(score), pos(1600, 24)]);\r\n    const speedLabel = add([text(SPEED), pos(1600, 90)]);\r\n\r\n    // increment score every frame\r\n    onUpdate(() => {\r\n        score++;\r\n        scoreLabel.text = \"Score: \" + score;\r\n        speedLabel.text = \"Speed: \" + SPEED;\r\n    });\r\n});\r\n\r\nscene(\"lose\", (score) => {\r\n    clearInterval(increaseSpeed);\r\n\r\n    add([\r\n        sprite(\"flappy\"),\r\n        pos(width() / 2, height() / 2 - 80),\r\n        scale(10),\r\n        anchor(\"center\"),\r\n    ]);\r\n\r\n    // display score\r\n    add([\r\n        text(score),\r\n        pos(width() / 2, height() / 2 + 80),\r\n        scale(2),\r\n        anchor(\"center\"),\r\n    ]);\r\n\r\n    // go back to game with space is pressed\r\n    onKeyPress(\"space\", () => go(\"game\"));\r\n    onClick(() => go(\"game\"));\r\n});\r\n\r\ngo(\"game\");"],"names":["FLOOR_HEIGHT","JUMP_FORCE","START_SPEED","SPEED","kaplay","increaseSpeed","player","jump","spawnTree","score","scoreLabel","speedLabel"],"mappings":"+uBAEA,MAAMA,EAAe,GACfC,EAAa,IACbC,EAAc,IACpB,IAAIC,EAAQ,EAGZC,EACI,CACI,MAAO,KACP,OAAQ,KACR,UAAW,EACnB,CACA,EAEA,IAAIC,EAGJ,WAAW,SAAU,qBAAqB,EAC1C,WAAW,KAAM,wBAAwB,EACzC,MAAM,OAAQ,IAAM,CAChBF,EAAQD,EACRG,EAAgB,YAAY,IAAM,CAC9BF,GAAS,EACb,EAAG,GAAI,EAGP,WAAW,IAAI,EAEf,IAAI,CACA,OAAO,IAAI,EACX,MAAM,CAAC,CACf,CAAK,EAGD,MAAMG,EAAS,IAAI,CAEf,OAAO,QAAQ,EACf,MAAM,CAAC,EACP,IAAI,GAAI,EAAE,EACV,OAAO,QAAQ,EACf,KAAK,CAAE,MAAO,GAAK,EACnB,KAAI,CAEZ,CAAK,EAGD,IAAI,CACA,KAAK,MAAK,EAAIN,CAAY,EAC1B,QAAQ,CAAC,EACT,IAAI,EAAG,QAAQ,EACf,OAAO,SAAS,EAChB,KAAI,EACJ,KAAK,CAAE,SAAU,GAAM,EACvB,MAAM,IAAK,IAAK,GAAG,CAC3B,CAAK,EAID,SAASO,GAAO,CACRD,EAAO,cACPA,EAAO,KAAKL,CAAU,CAE9B,CAGA,WAAW,QAASM,CAAI,EACxB,QAAQA,CAAI,EAEZ,SAASC,GAAY,CAEjB,IAAI,CACA,KAAK,GAAI,KAAK,GAAI,EAAE,CAAC,EACrB,KAAI,EACJ,QAAQ,CAAC,EACT,IAAI,MAAK,EAAI,OAAM,EAAKR,CAAY,EACpC,OAAO,SAAS,EAChB,MAAM,IAAK,IAAK,GAAG,EACnB,KAAK,KAAMG,CAAK,EAChB,MACZ,CAAS,EAGD,KAAK,KAAK,GAAK,GAAG,EAAGK,CAAS,CAClC,CAGAA,IAGAF,EAAO,UAAU,OAAQ,IAAM,CAE3B,GAAG,OAAQG,CAAK,EAChB,OACA,UAAUH,EAAO,GAAG,CACxB,CAAC,EAGD,IAAIG,EAAQ,EAEZ,MAAMC,EAAa,IAAI,CAAC,KAAKD,CAAK,EAAG,IAAI,KAAM,EAAE,CAAC,CAAC,EAC7CE,EAAa,IAAI,CAAC,KAAKR,CAAK,EAAG,IAAI,KAAM,EAAE,CAAC,CAAC,EAGnD,SAAS,IAAM,CACXM,IACAC,EAAW,KAAO,UAAYD,EAC9BE,EAAW,KAAO,UAAYR,CAClC,CAAC,CACL,CAAC,EAED,MAAM,OAASM,GAAU,CACrB,cAAcJ,CAAa,EAE3B,IAAI,CACA,OAAO,QAAQ,EACf,IAAI,MAAK,EAAK,EAAG,OAAM,EAAK,EAAI,EAAE,EAClC,MAAM,EAAE,EACR,OAAO,QAAQ,CACvB,CAAK,EAGD,IAAI,CACA,KAAKI,CAAK,EACV,IAAI,MAAK,EAAK,EAAG,OAAM,EAAK,EAAI,EAAE,EAClC,MAAM,CAAC,EACP,OAAO,QAAQ,CACvB,CAAK,EAGD,WAAW,QAAS,IAAM,GAAG,MAAM,CAAC,EACpC,QAAQ,IAAM,GAAG,MAAM,CAAC,CAC5B,CAAC,EAED,GAAG,MAAM"}