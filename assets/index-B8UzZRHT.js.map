{"version":3,"file":"index-B8UzZRHT.js","sources":["../../src/main.js"],"sourcesContent":["import kaplay from \"kaplay\";\n\nconst FLOOR_HEIGHT = 48;\nconst JUMP_FORCE = 900;\nconst SPEED = 480;\n\n// initialize context\nkaplay();\n\n// load assets\nloadSprite(\"flappy\", \"sprites/flappy.png\");\n\nscene(\"game\", () => {\n    // define gravity\n    setGravity(2700);\n\n    // add a game object to screen\n    const player = add([\n        // list of components\n        sprite(\"flappy\"),\n        scale(3),\n        pos(80, 40),\n        anchor(\"center\"),\n        area({scale: 0.8}),\n        body(),\n         \n    ]);\n\n    // floor\n    add([\n        rect(width(), FLOOR_HEIGHT),\n        outline(4),\n        pos(0, height()),\n        anchor(\"botleft\"),\n        area(),\n        body({ isStatic: true }),\n        color(127, 200, 255),\n    ]);\n\n    function jump() {\n        if (player.isGrounded()) {\n            player.jump(JUMP_FORCE);\n        }\n    }\n\n    // jump when user press space\n    onKeyPress(\"space\", jump);\n    onClick(jump);\n\n    function spawnTree() {\n        // add tree obj\n        add([\n            rect(48, rand(32, 96)),\n            area(),\n            outline(4),\n            pos(width(), height() - FLOOR_HEIGHT),\n            anchor(\"botleft\"),\n            color(255, 180, 255),\n            move(LEFT, SPEED),\n            \"tree\",\n        ]);\n\n        // wait a random amount of time to spawn next tree\n        wait(rand(0.5, 1.5), spawnTree);\n    }\n\n    // start spawning trees\n    spawnTree();\n\n    // lose if player collides with any game obj with tag \"tree\"\n    player.onCollide(\"tree\", () => {\n        // go to \"lose\" scene and pass the score\n        go(\"lose\", score);\n        burp();\n        addKaboom(player.pos);\n    });\n\n    // keep track of score\n    let score = 0;\n\n    const scoreLabel = add([text(score), pos(24, 24)]);\n\n    // increment score every frame\n    onUpdate(() => {\n        score++;\n        scoreLabel.text = score;\n    });\n});\n\nscene(\"lose\", (score) => {\n    add([\n        sprite(\"flappy\"),\n        pos(width() / 2, height() / 2 - 80),\n        scale(10),\n        anchor(\"center\"),\n    ]);\n\n    // display score\n    add([\n        text(score),\n        pos(width() / 2, height() / 2 + 80),\n        scale(2),\n        anchor(\"center\"),\n    ]);\n\n    // go back to game with space is pressed\n    onKeyPress(\"space\", () => go(\"game\"));\n    onClick(() => go(\"game\"));\n});\n\ngo(\"game\");"],"names":["FLOOR_HEIGHT","JUMP_FORCE","SPEED","kaplay","player","jump","spawnTree","score","scoreLabel"],"mappings":"+uBAEA,MAAMA,EAAe,GACfC,EAAa,IACbC,EAAQ,IAGdC,EAAM,EAGN,WAAW,SAAU,oBAAoB,EAEzC,MAAM,OAAQ,IAAM,CAEhB,WAAW,IAAI,EAGf,MAAMC,EAAS,IAAI,CAEf,OAAO,QAAQ,EACf,MAAM,CAAC,EACP,IAAI,GAAI,EAAE,EACV,OAAO,QAAQ,EACf,KAAK,CAAC,MAAO,EAAG,CAAC,EACjB,KAAI,CAEZ,CAAK,EAGD,IAAI,CACA,KAAK,MAAK,EAAIJ,CAAY,EAC1B,QAAQ,CAAC,EACT,IAAI,EAAG,QAAQ,EACf,OAAO,SAAS,EAChB,KAAI,EACJ,KAAK,CAAE,SAAU,GAAM,EACvB,MAAM,IAAK,IAAK,GAAG,CAC3B,CAAK,EAED,SAASK,GAAO,CACRD,EAAO,cACPA,EAAO,KAAKH,CAAU,CAE9B,CAGA,WAAW,QAASI,CAAI,EACxB,QAAQA,CAAI,EAEZ,SAASC,GAAY,CAEjB,IAAI,CACA,KAAK,GAAI,KAAK,GAAI,EAAE,CAAC,EACrB,KAAI,EACJ,QAAQ,CAAC,EACT,IAAI,MAAK,EAAI,OAAM,EAAKN,CAAY,EACpC,OAAO,SAAS,EAChB,MAAM,IAAK,IAAK,GAAG,EACnB,KAAK,KAAME,CAAK,EAChB,MACZ,CAAS,EAGD,KAAK,KAAK,GAAK,GAAG,EAAGI,CAAS,CAClC,CAGAA,EAAS,EAGTF,EAAO,UAAU,OAAQ,IAAM,CAE3B,GAAG,OAAQG,CAAK,EAChB,KAAI,EACJ,UAAUH,EAAO,GAAG,CACxB,CAAC,EAGD,IAAIG,EAAQ,EAEZ,MAAMC,EAAa,IAAI,CAAC,KAAKD,CAAK,EAAG,IAAI,GAAI,EAAE,CAAC,CAAC,EAGjD,SAAS,IAAM,CACXA,IACAC,EAAW,KAAOD,CACtB,CAAC,CACL,CAAC,EAED,MAAM,OAASA,GAAU,CACrB,IAAI,CACA,OAAO,QAAQ,EACf,IAAI,MAAK,EAAK,EAAG,OAAM,EAAK,EAAI,EAAE,EAClC,MAAM,EAAE,EACR,OAAO,QAAQ,CACvB,CAAK,EAGD,IAAI,CACA,KAAKA,CAAK,EACV,IAAI,MAAK,EAAK,EAAG,OAAM,EAAK,EAAI,EAAE,EAClC,MAAM,CAAC,EACP,OAAO,QAAQ,CACvB,CAAK,EAGD,WAAW,QAAS,IAAM,GAAG,MAAM,CAAC,EACpC,QAAQ,IAAM,GAAG,MAAM,CAAC,CAC5B,CAAC,EAED,GAAG,MAAM"}