{"version":3,"file":"index-DZMn2tZg.js","sources":["../../src/main.js"],"sourcesContent":["import kaplay from \"kaplay\";\r\n\r\n// Define constants\r\nconst FLOOR_HEIGHT = 48;\r\nconst JUMP_FORCE = 900;\r\nconst START_SPEED = 480;\r\n\r\n// Define non-constant variables\r\nlet speed = 0;\r\nlet increaseSpeed;\r\nlet highScore = 0;\r\n\r\n// Initialize game context\r\nkaplay({\r\n  width: 1920,\r\n  height: 1080,\r\n  letterbox: true,\r\n});\r\n\r\n// Load assets\r\nloadSprite(\"flappy\", \"sprites/67-bird.png\");\r\nloadSprite(\"bg\", \"sprites/67-land-BG.png\");\r\n\r\n// Define game scene\r\nscene(\"game\", () => {\r\n  speed = START_SPEED; // Reset speed to starting speed (constant)\r\n\r\n  // Start interval timer to increase speed every second\r\n  increaseSpeed = setInterval(() => {\r\n    speed += 10;\r\n  }, 1000);\r\n\r\n  // Define gravity (library defined)\r\n  setGravity(2700);\r\n\r\n  // Add background to screen and scale it up\r\n  add([sprite(\"bg\"), scale(4)]);\r\n\r\n  // Add the player object to scene\r\n  const player = add([\r\n    sprite(\"flappy\"),\r\n    scale(3),\r\n    pos(80, 40),\r\n    anchor(\"center\"),\r\n    area({ scale: 0.5 }),\r\n    body(),\r\n  ]);\r\n\r\n  // Add floor to the scene\r\n  add([\r\n    rect(width(), FLOOR_HEIGHT),\r\n    outline(4),\r\n    pos(0, height()),\r\n    anchor(\"botleft\"),\r\n    area(),\r\n    body({ isStatic: true }),\r\n    color(127, 200, 255),\r\n  ]);\r\n\r\n  // Define jump function (only when on ground)\r\n  function jump() {\r\n    if (player.isGrounded()) {\r\n      player.jump(JUMP_FORCE);\r\n    }\r\n  }\r\n\r\n  // Define jump when user press space\r\n  onKeyPress(\"space\", jump);\r\n  onClick(jump);\r\n\r\n  // Function to spawn trees\r\n  function spawnTree() {\r\n    // Define single tree object\r\n    add([\r\n      rect(48, rand(32, 96)),\r\n      area(),\r\n      outline(4),\r\n      pos(width(), height() - FLOOR_HEIGHT),\r\n      anchor(\"botleft\"),\r\n      color(255, 180, 255),\r\n      move(LEFT, speed),\r\n      \"tree\",\r\n    ]);\r\n    // wait a random amount of time to spawn next tree\r\n    wait(rand(0.5, 1.5), spawnTree);\r\n  }\r\n\r\n  // Start spawning trees\r\n  spawnTree();\r\n\r\n  // Define lose condition when player collides with tree\r\n  player.onCollide(\"tree\", () => {\r\n    // go to \"lose\" scene and pass the score\r\n    go(\"lose\", score);\r\n    burp();\r\n    addKaboom(player.pos);\r\n  });\r\n\r\n  // keep track of score\r\n  let score = 0;\r\n\r\n  // labels to display score and speed\r\n  const scoreLabel = add([text(score), pos(1600, 24)]);\r\n  const speedLabel = add([text(speed), pos(1600, 90)]);\r\n  const highScoreLabel = add([\r\n    text(\"High Score: \" + highScore),\r\n    pos(1600, 150),\r\n  ]);\r\n\r\n  // increment score and speed every frame\r\n  onUpdate(() => {\r\n    score++;\r\n    scoreLabel.text = \"Score: \" + score;\r\n    speedLabel.text = \"Speed: \" + (speed - 480) * 2;\r\n    if (score > highScore) {\r\n      highScore = score;\r\n      highScoreLabel.text = \"High Score: \" + highScore;\r\n    }\r\n  });\r\n});\r\n\r\n// Define scene to show when lose the game\r\nscene(\"lose\", (score) => {\r\n  // Stop increasing speed when lose\r\n  clearInterval(increaseSpeed);\r\n\r\n  // Put player in the middle of the screen\r\n  add([\r\n    sprite(\"flappy\"),\r\n    pos(width() / 2, height() / 2 - 80),\r\n    scale(10),\r\n    anchor(\"center\"),\r\n  ]);\r\n\r\n  // display score\r\n  add([\r\n    text(score),\r\n    pos(width() / 2, height() / 2 + 80),\r\n    scale(2),\r\n    anchor(\"center\"),\r\n  ]);\r\n\r\n  // go back to game with space is pressed\r\n  onKeyPress(\"space\", () => go(\"game\"));\r\n  onClick(() => go(\"game\"));\r\n});\r\n\r\n// Run game!\r\ngo(\"game\");\r\n"],"names":["FLOOR_HEIGHT","JUMP_FORCE","START_SPEED","speed","increaseSpeed","highScore","kaplay","player","jump","spawnTree","score","scoreLabel","speedLabel","highScoreLabel"],"mappings":"+uBAGA,MAAMA,EAAe,GACfC,EAAa,IACbC,EAAc,IAGpB,IAAIC,EAAQ,EACRC,EACAC,EAAY,EAGhBC,EAAO,CACL,MAAO,KACP,OAAQ,KACR,UAAW,EACb,CAAC,EAGD,WAAW,SAAU,qBAAqB,EAC1C,WAAW,KAAM,wBAAwB,EAGzC,MAAM,OAAQ,IAAM,CAClBH,EAAQD,EAGRE,EAAgB,YAAY,IAAM,CAChCD,GAAS,EACX,EAAG,GAAI,EAGP,WAAW,IAAI,EAGf,IAAI,CAAC,OAAO,IAAI,EAAG,MAAM,CAAC,CAAC,CAAC,EAG5B,MAAMI,EAAS,IAAI,CACjB,OAAO,QAAQ,EACf,MAAM,CAAC,EACP,IAAI,GAAI,EAAE,EACV,OAAO,QAAQ,EACf,KAAK,CAAE,MAAO,GAAK,EACnB,KAAI,CACR,CAAG,EAGD,IAAI,CACF,KAAK,MAAK,EAAIP,CAAY,EAC1B,QAAQ,CAAC,EACT,IAAI,EAAG,QAAQ,EACf,OAAO,SAAS,EAChB,KAAI,EACJ,KAAK,CAAE,SAAU,GAAM,EACvB,MAAM,IAAK,IAAK,GAAG,CACvB,CAAG,EAGD,SAASQ,GAAO,CACVD,EAAO,cACTA,EAAO,KAAKN,CAAU,CAE1B,CAGA,WAAW,QAASO,CAAI,EACxB,QAAQA,CAAI,EAGZ,SAASC,GAAY,CAEnB,IAAI,CACF,KAAK,GAAI,KAAK,GAAI,EAAE,CAAC,EACrB,KAAI,EACJ,QAAQ,CAAC,EACT,IAAI,MAAK,EAAI,OAAM,EAAKT,CAAY,EACpC,OAAO,SAAS,EAChB,MAAM,IAAK,IAAK,GAAG,EACnB,KAAK,KAAMG,CAAK,EAChB,MACN,CAAK,EAED,KAAK,KAAK,GAAK,GAAG,EAAGM,CAAS,CAChC,CAGAA,IAGAF,EAAO,UAAU,OAAQ,IAAM,CAE7B,GAAG,OAAQG,CAAK,EAChB,OACA,UAAUH,EAAO,GAAG,CACtB,CAAC,EAGD,IAAIG,EAAQ,EAGZ,MAAMC,EAAa,IAAI,CAAC,KAAKD,CAAK,EAAG,IAAI,KAAM,EAAE,CAAC,CAAC,EAC7CE,EAAa,IAAI,CAAC,KAAKT,CAAK,EAAG,IAAI,KAAM,EAAE,CAAC,CAAC,EAC7CU,EAAiB,IAAI,CACzB,KAAK,eAAiBR,CAAS,EAC/B,IAAI,KAAM,GAAG,CACjB,CAAG,EAGD,SAAS,IAAM,CACbK,IACAC,EAAW,KAAO,UAAYD,EAC9BE,EAAW,KAAO,WAAaT,EAAQ,KAAO,EAC1CO,EAAQL,IACVA,EAAYK,EACZG,EAAe,KAAO,eAAiBR,EAE3C,CAAC,CACH,CAAC,EAGD,MAAM,OAASK,GAAU,CAEvB,cAAcN,CAAa,EAG3B,IAAI,CACF,OAAO,QAAQ,EACf,IAAI,MAAK,EAAK,EAAG,OAAM,EAAK,EAAI,EAAE,EAClC,MAAM,EAAE,EACR,OAAO,QAAQ,CACnB,CAAG,EAGD,IAAI,CACF,KAAKM,CAAK,EACV,IAAI,MAAK,EAAK,EAAG,OAAM,EAAK,EAAI,EAAE,EAClC,MAAM,CAAC,EACP,OAAO,QAAQ,CACnB,CAAG,EAGD,WAAW,QAAS,IAAM,GAAG,MAAM,CAAC,EACpC,QAAQ,IAAM,GAAG,MAAM,CAAC,CAC1B,CAAC,EAGD,GAAG,MAAM"}